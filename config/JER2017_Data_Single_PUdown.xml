<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE JobConfiguration PUBLIC "" "JobConfig.dtd"[

<!-- Generic Value -->
<!ENTITY NEVT                       "-1">
<!ENTITY CACHEABLE                  "False">
<!ENTITY OUTDIR                     "/nfs/dust/cms/user/amalara/sframe_all/JER2017_Data">

<!-- Cleaning Cuts -->
<!ENTITY APPLY_EtaPhi_cut           "true">     <!--Apply Eta Phi cleaning during ECAL problems -->
<!ENTITY APPLY_EtaPhi_HCAL          "true">     <!--Apply Eta Phi cleaning during HCAL problems -->
<!-- Directory for hotjet map -->
<!ENTITY CUT_DIR                    "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/hotjets/">

<!-- Trigger -->
<!ENTITY TRIGGERS                   "central">  <!-- forward, central, full -->
<!ENTITY TRIGGER_CENTRAL            "true">     <!--Trigger Flag -->
<!ENTITY TRIGGER_FWD                "false">    <!--Trigger Flag -->
<!ENTITY PtBinsTrigger              "Single">   <!-- Single, DiJet -->

<!-- MC PuReweighting -->
<!ENTITY DO_PU_REWEIGHTING          "true">    <!-- true, false -->
<!ENTITY SYSTYPE_PU                 "down">    <!-- central, up, down -->
<!ENTITY PILEUP_DIRECTORY           "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/data/MyMCPileupHistogram.root">
<!ENTITY PILEUP_DIRECTORY_DATA      "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/data/MyDataPileupHistogram.root">
<!ENTITY PILEUP_DIRECTORY_DATA_UP   "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/data/MyDataPileupHistogram_72383.root">
<!ENTITY PILEUP_DIRECTORY_DATA_DOWN "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/data/MyDataPileupHistogram_66017.root">

<!-- Jet Variables -->
<!ENTITY JEC_VERSION                "Fall17_17Nov2017_V10">
<!ENTITY JETLABEL                   "AK4CHS"> <!-- AK4CHS - AK4PUPPI --> <!-- AK8CHS - AK8PUPPI -->

<!-- Systematic uncertainties -->
<!ENTITY JERSMEAR_DIRECTION         "nominal">  <!--nominal/down/up -->
<!ENTITY JECSMEAR_DIRECTION         "nominal">  <!--nominal/down/up -->

<!-- unused -->
<!ENTITY APPLY_LUMIWEIGHTS          "false">
<!ENTITY APPLY_UNFLATTENING         "false">
<!ENTITY APPLY_METoverPTcut         "false">    <!--Apply MET Cut-->
<!ENTITY b_closuretest              "true">     <!-- if set to false it runs without residual corrections -->
<!ENTITY APPLY_WEIGHTS              "false">
<!ENTITY WEIGHT_PATH                "/nfs/dust/cms/user/multh/JEC/2016ReReco/Residuals/Summer16_03Feb2017_V3/AK4CHS/MC_Reweighted_chsMET_NewTriggerSetup_ForWeights/">


<!-- Data Samples -->
<!ENTITY DATA_RunB_promptReco_2017 SYSTEM "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/datasets/RunII_94X_v1_woHOTVR_woXCONE/DATA_JetHT_RunB_17Nov2017_wCHSMETfixed.xml">
<!ENTITY DATA_RunC_promptReco_2017 SYSTEM "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/datasets/RunII_94X_v1_woHOTVR_woXCONE/DATA_JetHT_RunC_17Nov2017_wCHSMETfixed.xml">
<!ENTITY DATA_RunD_promptReco_2017 SYSTEM "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/datasets/RunII_94X_v1_woHOTVR_woXCONE/DATA_JetHT_RunD_17Nov2017_wCHSMETfixed.xml">
<!ENTITY DATA_RunE_promptReco_2017 SYSTEM "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/datasets/RunII_94X_v1_woHOTVR_woXCONE/DATA_JetHT_RunE_17Nov2017_wCHSMETfixed.xml">
<!ENTITY DATA_RunF_promptReco_2017 SYSTEM "/nfs/dust/cms/user/amalara/WorkingArea/UHH2_94/CMSSW_9_4_1/src/UHH2/common/datasets/RunII_94X_v1_woHOTVR_woXCONE/DATA_JetHT_RunF_17Nov2017_wCHSMETfixed.xml">

<!-- <!ENTITY PROOFdir            "/nfs/dust/cms/user/multh/.proof2"> -->

]>


<!--
<ConfigParse NEventsBreak="0" FileSplit="60" AutoResubmit="5"/>
<ConfigSGE RAM ="4" DISK ="3" Mail="andrea.malara@desy.de" Notification="as" Workdir="workdir_JER2017_Data_Single_PUdown"/>
-->

<!-- OutputLevel controls which messages are printed; set to VERBOSE or DEBUG for more verbosity, to WARNING or ERROR for less -->
<JobConfiguration JobName="ExampleCycleJob" OutputLevel="INFO">
  <Library Name="libSUHH2JER2017"/>
  <Package Name="SUHH2JER2017.par" />

  <Cycle Name="uhh2::AnalysisModuleRunner" OutputDirectory="&OUTDIR;/" PostFix="" TargetLumi="8496.0" >

    <!-- DATA -->
    <InputData Type="DATA" Version="DATA_RunB_promptReco_2017" Lumi="1" NEventsMax="&NEVT;" Cacheable="&CACHEABLE;">                               &DATA_RunB_promptReco_2017;      <InputTree Name="AnalysisTree"/> <OutputTree Name="AnalysisTree"/> </InputData>
    <InputData Type="DATA" Version="DATA_RunC_promptReco_2017" Lumi="1" NEventsMax="&NEVT;" Cacheable="&CACHEABLE;">                               &DATA_RunC_promptReco_2017;      <InputTree Name="AnalysisTree"/> <OutputTree Name="AnalysisTree"/> </InputData>
    <InputData Type="DATA" Version="DATA_RunD_promptReco_2017" Lumi="1" NEventsMax="&NEVT;" Cacheable="&CACHEABLE;">                               &DATA_RunD_promptReco_2017;      <InputTree Name="AnalysisTree"/> <OutputTree Name="AnalysisTree"/> </InputData>
    <InputData Type="DATA" Version="DATA_RunE_promptReco_2017" Lumi="1" NEventsMax="&NEVT;" Cacheable="&CACHEABLE;">                               &DATA_RunE_promptReco_2017;      <InputTree Name="AnalysisTree"/> <OutputTree Name="AnalysisTree"/> </InputData>
    <InputData Type="DATA" Version="DATA_RunF_promptReco_2017" Lumi="1" NEventsMax="&NEVT;" Cacheable="&CACHEABLE;">                               &DATA_RunF_promptReco_2017;      <InputTree Name="AnalysisTree"/> <OutputTree Name="AnalysisTree"/> </InputData>

    <!--
  -->
  <UserConfig>
    <!-- define which collections to read from the input. Only specify what you need to save I/O time -->
    <Item Name="PrimaryVertexCollection"    Value="offlineSlimmedPrimaryVertices" />
    <Item Name="ElectronCollection"         Value="slimmedElectronsUSER" />
    <Item Name="MuonCollection"             Value="slimmedMuonsUSER" />
    <Item Name="TauCollection"              Value="slimmedTaus" />
    <Item Name="JetCollection"              Value="slimmedJets" />  <!-- slimmedJet: AK4CHS  -->  <!-- updatedPatJetsSlimmedJetsPuppi:AK4PUPPI -->
    <Item Name="TopJetCollection"           Value="packedPatJetsAk8CHSJets_SoftDropCHS" />  <!-- updatedPatJetsPatJetsAK8PFPUPPI: AK8PUPPI -->  <!-- patJetsSlimmedJetsAK8: AK8CHS -->
    <Item Name="METName"                    Value="slimmedMETs" />
    <Item Name="GenParticleCollection"      Value="GenParticles"/>
    <Item Name="GenJetCollection"           Value="slimmedGenJets"/>

    <!-- Run B  -->
    <Item Name="trigger40"                  Value="HLT_PFJet40_v*"/>
    <Item Name="trigger60"                  Value="HLT_PFJet60_v*"/>
    <Item Name="trigger80"                  Value="HLT_PFJet80_v*"/>
    <Item Name="trigger140"                 Value="HLT_PFJet140_v*"/>
    <Item Name="trigger200"                 Value="HLT_PFJet200_v*"/>
    <Item Name="trigger260"                 Value="HLT_PFJet260_v*"/>
    <Item Name="trigger320"                 Value="HLT_PFJet320_v*"/>
    <Item Name="trigger400"                 Value="HLT_PFJet400_v*"/>
    <Item Name="trigger450"                 Value="HLT_PFJet450_v*"/>
    <Item Name="trigger500"                 Value="HLT_PFJet500_v*"/>



    <!-- tell AnalysisModuleRunner NOT to use the MC event weight from SFrame; rather let
    MCLumiWeight (called via CommonModules) calculate the MC event weight. The MC
    event weight assigned by MCLumiWeight is InputData.Lumi / Cycle.TargetLumi. -->
    <Item Name="use_sframe_weight"          Value="false"/>

    <Item Name="lumi_file"                  Value="/nfs/dust/cms/user/amalara/WorkingArea/94X/CMSSW_9_4_1/src/UHH2/common/data/Cert_294927-306462_13TeV_EOY2017ReReco_Collisions17_JSON.root"/>
    <Item Name="lumihists_lumi_per_bin"     Value="500."/> <!-- used in UHH2/common/include/LuminosityHists.h -->

    <!-- Jet Variables -->
    <Item Name="JetLabel"                   Value="&JETLABEL;"/>
    <Item Name="JEC_Version"                Value="&JEC_VERSION;"/>

    <!-- Systematic uncertainties -->
    <Item Name="jersmear_direction"         Value="&JERSMEAR_DIRECTION;"/>  <!--used only in UHH2/common/include/JetCorrections.cxx -->
    <Item Name="jecsmear_direction"         Value="&JECSMEAR_DIRECTION;"/>  <!--used only in UHH2/common/include/JetCorrections.cxx -->

    <Item Name="METoverPt_cut"              Value="&APPLY_METoverPTcut;"/>
    <Item Name="EtaPhi_cut"                 Value="&APPLY_EtaPhi_cut;"/>
    <Item Name="Cut_dir"                    Value="&CUT_DIR;"/> <!--used only in selection.cxx -->
    <Item Name="EtaPhi_HCAL"                Value="&APPLY_EtaPhi_HCAL;"/>

    <!-- Triggers -->
    <Item Name="Triggers"                   Value="&TRIGGERS;"/>
    <Item Name="Trigger_Central"            Value="&TRIGGER_CENTRAL;"/>
    <Item Name="Trigger_FWD"                Value="&TRIGGER_FWD;"/>
    <Item Name="PtBinsTrigger"              Value="&PtBinsTrigger;"/>

    <!-- MC PuReweighting -->
    <Item Name="DO_Pu_ReWeighting"          Value="&DO_PU_REWEIGHTING;"/>
    <Item Name="SysType_PU"                 Value="&SYSTYPE_PU;"/>
    <Item Name="pileup_directory"           Value="&PILEUP_DIRECTORY;"/>            <!--used only in UHH2/common/include/MCWeight.h -->
    <Item Name="pileup_directory_data"      Value="&PILEUP_DIRECTORY_DATA;"/>       <!--used only in UHH2/common/include/MCWeight.h -->
    <Item Name="pileup_directory_data_up"   Value="&PILEUP_DIRECTORY_DATA_UP;"/>    <!--used only in UHH2/common/include/MCWeight.h -->
    <Item Name="pileup_directory_data_down" Value="&PILEUP_DIRECTORY_DATA_DOWN;"/>  <!--used only in UHH2/common/include/MCWeight.h -->


    <!-- unused -->
    <Item Name="ClosureTest"                Value="&b_closuretest;"/>
    <Item Name="Apply_Lumiweights"          Value="&APPLY_LUMIWEIGHTS;"/>
    <Item Name="Apply_Unflattening"         Value="&APPLY_UNFLATTENING;"/>
    <Item Name="Apply_Weights"              Value="&APPLY_WEIGHTS;"/>
    <Item Name="MC_Weights_Path"            Value="&WEIGHT_PATH;"/>
    <Item Name="METoverPt_cut"              Value="&APPLY_METoverPTcut;"/>
    <Item Name="EtaPhi_cut"                 Value="&APPLY_EtaPhi_cut;"/>
    <Item Name="Cut_dir"                    Value="&CUT_DIR;"/> <!--used only in selection.cxx -->
    <Item Name="EtaPhi_HCAL"                Value="&APPLY_EtaPhi_HCAL;"/>

    <!-- the class name of the AnalysisModule subclasses to run: -->
    <Item Name="AnalysisModule"             Value="JER2017Module" />

  </UserConfig>
</Cycle>
</JobConfiguration>
